(function(t){function e(e){for(var a,o,c=e[0],s=e[1],l=e[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={index:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("a14e")},"0131":function(t,e,n){},1593:function(t,e,n){},"15b0":function(t,e,n){},2270:function(t,e,n){"use strict";var a=n("15b0"),i=n.n(a);i.a},"2b0e":function(t,e,n){t.exports=n("d6f0")(2)},"5c28":function(t,e,n){},"5da2":function(t,e,n){"use strict";var a=n("7ac7"),i=n.n(a);i.a},"6e5f":function(t,e,n){"use strict";var a=n("1593"),i=n.n(a);i.a},"6e6d":function(t,e,n){"use strict";var a=n("9e2e"),i=n.n(a);i.a},"7ac7":function(t,e,n){},"898b":function(t,e,n){"use strict";var a=n("dc80"),i=n.n(a);i.a},"8c4f":function(t,e,n){t.exports=n("d6f0")(6)},"9dd5":function(t,e,n){},"9e2e":function(t,e,n){},a14e:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"test"},[n("router-view")],1)},r=[],o=(n("96cf"),n("3b8d")),c=n("bd86"),s=(n("a481"),n("3b2b"),n("ac6a"),n("456d"),n("bc3a")),l=n.n(s);function u(t,e,n){if(e&&"string"!==typeof e&&!Array.isArray(e)&&Object.keys(e).length){var a=t,i=Object.assign({},e);return Object.keys(e).forEach((function(n,r){var o=new RegExp("{".concat(n,"}"),"g");a=a.replace(o,e[n]),o.test(t)&&(i[n]=void 0)})),"params"===n?i:a}return"params"===n?e:t}var d=l.a.create({timeout:5e3,responseType:"json",headers:{"content-type":"application/json;charset=UTF-8"},withCredentials:!0});function p(t,e,n,a){var i=e.replace(/^\//g,"");return function(e){var r="get"===n?"params":"data",o=Object(c["a"])({method:n,baseURL:i,url:u(t,e)},r,u(t,e,"params")),s=Object.assign({},o,a||{});return d(s)}}var f={get:function(t,e,n){return p(t,e,"get",n)},post:function(t,e,n){return p(t,e,"post",n)},delete:function(t,e,n){return p(t,e,"delete",n)},put:function(t,e,n){return p(t,e,"put",n)},patch:function(t,e,n){return p(t,e,"patch",n)}},h=f,m="http://139.199.98.207",v="".concat(m,":9101/article"),g={save:h.post("save",v),list:h.get("list",v),login:h.post("login",v),checkLogin:h.get("selfCheck",v),delArticle:h.post("delete",v),authority:h.get("authority",v)};function b(t){for(var e in t)t[e]?localStorage.setItem(e,t[e]):localStorage.removeItem(e)}var y={name:"home",data:function(){return{}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.checkLogin().then((function(t){var n=t.data;0===n.code?b({username:n.data.username}):e.$router.push("/login")}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},w=y,x=n("2877"),k=Object(x["a"])(w,i,r,!1,null,null,null),_=k.exports,C=n("8c4f"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t.isAuth?n("div",{staticClass:"fixed-write",on:{click:t.handlePanel}},[n("Icon",{staticClass:"el-icon-circle-plus-outline"})],1):t._e(),t._l(t.articleList,(function(e){return n("div",{staticClass:"wraper"},[1===e.type?n("TabOne",{attrs:{result:e}}):n("item",{attrs:{result:e}}),n("div",{staticClass:"article-option"},[n("div",[n("span",[t._v(t._s(t.dateFormat(e.date)))]),n("span",[t._v(" "+t._s(e.username))])]),n("div",[t.isAuth?n("a",{on:{click:function(n){return t.handleDel(e)}}},[t._v("删除")]):t._e()])])],1)})),n("div",{staticStyle:{width:"100%",height:"10vw"}})],2)},j=[],I=(n("6762"),n("2fdb"),n("aaa5"),n("450d"),n("a578")),T=n.n(I),P=(n("9dd5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-item"},[n("div",{staticClass:"article-content",domProps:{innerHTML:t._s(t.result.content)}})])}),U=[],$={name:"item",data:function(){return{}},props:["result"]},L=$,S=(n("2270"),Object(x["a"])(L,P,U,!1,null,"4ae8567a",null)),R=S.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-item"},[n("div"),n("div",{staticClass:"article-title"},[t._v(t._s(t.result.title))]),n("div",{staticClass:"content-show"},t._l(t.result.fileList,(function(e){return n("div",{staticClass:"pic-item"},["image"===t.isPic(e.type)?n("a",{on:{click:function(n){return t.bigPhoto(e)}}},[n("img",{attrs:{src:t.cuttingImg(e.url),alt:""}})]):"video"===t.isPic(e.type)?n("a",{staticClass:"item-video",on:{click:function(n){return t.bigPhoto(e)}}},[n("img",{attrs:{src:t.cuttingImg(e.imgUrl)||"",alt:""}}),n("span",{staticClass:"video-play"},[n("van-icon",{attrs:{name:"play-circle-o"}})],1)]):t._e()])})),0),n("div",{staticClass:"photo-fixed",style:{display:t.display}},[n("div",{staticClass:"back-but",on:{click:function(e){return e.stopPropagation(),t.cancel(e)}}},[n("van-icon",{attrs:{name:"arrow-left"}})],1),"image"===t.isPic(t.fileType)?n("div",{staticClass:"content"},[n("div",[n("img",{attrs:{src:t.ruleDirection(t.url),alt:"加载中"},on:{click:t.cancel}})])]):"video"===t.isPic(t.fileType)?n("div",{staticClass:"video-show content"},[n("video",{attrs:{"x5-video-player-type":"h5",autoplay:"",playsinline:"","webkit-playsinline":"","x5-video­player­fullscreen":!1,src:t.url},on:{click:function(e){return e.stopPropagation(),t.cancel(e)}}},[t._v("\n\t\t\t\t不支持视频播放")])]):t._e()])])},D=[],E=(n("7f7f"),n("c3a6"),n("ad06")),M={name:"tab-one",data:function(){return{display:"none",url:"",fileType:""}},props:["result"],components:Object(c["a"])({},E["a"].name,E["a"]),methods:{bigPhoto:function(t){this.display="block",this.url=t.url,this.fileType=t.type},cancel:function(){this.display="none",this.url="",this.type=""},isPic:function(t){return t.indexOf("image")>-1?"image":t.indexOf("video")>-1?"video":void 0},cuttingImg:function(t,e){return t?e?"".concat(t,"?imageView2/2/w/").concat(e,"/h/300/q/75|imageslim"):"".concat(t,"?imageView2/2/w/300/h/300/q/75|imageslim"):""},ruleDirection:function(t){return"".concat(t,"?imageMogr2/auto-orient")}}},q=M,W=(n("6e5f"),Object(x["a"])(q,A,D,!1,null,"1a07305e",null)),F=W.exports;n("6b54");function N(t){t=t;var e=new Date(0);document.cookie=t+"=;expires="+e.toUTCString()}var H=n("b166"),J={name:"show",data:function(){return{articleList:[],isAuth:!1}},components:{Item:R,Icon:T.a,TabOne:F},methods:{dateFormat:function(t){return t?Object(H["a"])(new Date(t),"yyyy-MM-dd HH:mm:ss"):""},handlePanel:function(){this.$router.push("/write")},handleDel:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.delArticle({id:e._id});case 2:n=t.sent,0===n.data.code&&(console.log("删除成功"),this.refreshList());case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),refreshList:function(){var t=this;g.list().then((function(e){var n=e.data.data;t.articleList=n.list}))},delToken:function(){N("token"),location.reload()}},created:function(){var t=this;this.refreshList(),g.authority().then((function(e){var n=e.data;if(0===n.code){var a=n.data.code;a.includes("delete")?t.isAuth=!0:t.isAuth=!1}}))}},Q=J,z=(n("5da2"),Object(x["a"])(Q,O,j,!1,null,"03d25608",null)),V=z.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"write-app"},[n("div",{staticClass:"article-submit"},[n("a",{on:{click:t.handleSubmit}},[t._v("发表")])]),n("div",{key:"tab_title",staticClass:"tab-text"},[1===t.tabType?n("div",{on:{click:function(e){return t.handleTab(2)}}},[n("van-icon",{attrs:{name:"send-gift"}}),t._v(" 图文模式")],1):2===t.tabType?n("div",{on:{click:function(e){return t.handleTab(1)}}},[n("van-icon",{attrs:{name:"card"}}),t._v(" 富文本模式")],1):t._e()]),n("div",{key:"tab-content"},[2===t.tabType?n("div",[n("div",{staticClass:"edit-tool"},[n("div",{staticStyle:{display:"inline-block"}},[n("QiniuUpload",{on:{onchange:t.uploadChange}},[n("span",{staticStyle:{color:"#c8c9cc"}},[n("Icon",{staticClass:"el-icon-camera"})],1)])],1)]),n("Panel",{ref:"panel"})],1):n("div",[n("Picontent",{ref:"picGroup"})],1)])])},Z=[],G=(n("4917"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel-msg"},[n("div",{ref:"notePanel",staticClass:"box-wrap",staticStyle:{display:"inline-block"},attrs:{contenteditable:"true"}})])}),B=[],K=n("7618"),X=(n("c5f6"),{name:"panel",data:function(){return{}},components:{},mounted:function(){this.$refs.notePanel.addEventListener("paste",(function(t){var e=this,n=t.clipboardData,a=window.navigator.userAgent;if(t.clipboardData&&t.clipboardData.items&&!(n.items&&2===n.items.length&&"string"===n.items[0].kind&&"file"===n.items[1].kind&&n.types&&2===n.types.length&&"text/plain"===n.types[0]&&"Files"===n.types[1]&&a.match(/Macintosh/i)&&Number(a.match(/Chrome\/(\d{2})/i)[1])<49))for(var i=0;i<n.items.length;i++){var r=n.items[i];if("file"==r.kind){var o=function(){var t=r.getAsFile();if(0===t.size)return{v:void 0};var n="",a=new FormData;a.append("file",t),a.append("token","9h5kHWHnr20ObcQ45Efmw7Y2J8Dn_0lvl6ch0cTZ:V8M-iZIxEqh-DyJaACrUA_5WhD4=:eyJzY29wZSI6ImNvbyIsImRlYWRsaW5lIjoxNTg2NjU5NTUxfQ=="),l()({method:"post",url:"http://upload-z2.qiniup.com",data:a}).then((function(t){n="http://image.shenxiaoyu.cn/".concat(t.data.key);var a=new Image;a.src=n,a.style.display="inline-block",a.style.maxWidth="100%",a.style.padding="4px 0",e.appendChild(a)}))}();if("object"===Object(K["a"])(o))return o.v}}}),!1),this.getMessage()},methods:{getMessage:function(){}}}),tt=X,et=(n("898b"),Object(x["a"])(tt,G,B,!1,null,"8b1c8a1c",null)),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-v1"},[n("div",{on:{click:t.handleUpload}},[t._t("default",[t._v("上传")])],2),n("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.handleUploadChange}})])},it=[];n("5df3"),n("1c4c"),n("34ef"),n("28a5");function rt(t,e){for(var n=atob(t.split(",")[1]),a=[],i=0;i<n.length;i++)a.push(n.charCodeAt(i));return new Blob([new Uint8Array(a)],{type:e})}var ot,ct,st={name:"upload-v1",data:function(){return{fileList:[],accept:"image/*,video/*",loading:!1}},components:{},props:{token:{type:String,default:"9h5kHWHnr20ObcQ45Efmw7Y2J8Dn_0lvl6ch0cTZ:V8M-iZIxEqh-DyJaACrUA_5WhD4=:eyJzY29wZSI6ImNvbyIsImRlYWRsaW5lIjoxNTg2NjU5NTUxfQ=="},action:{type:String,default:"http://upload-z2.qiniup.com"},multiple:{type:Boolean,default:!0},accepts:{type:Array,default:["png","jpg","webp","mp4"]},origin:{type:String,default:"http://image.shenxiaoyu.cn"}},methods:{singleUpload:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a,i,r,o,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={name:e.name,type:e.type,size:(e.size/1024/1024).toFixed(3)},!(n.type.indexOf("video")>-1)){t.next=13;break}return t.next=4,this.getVideoPhoto(e);case 4:return a=t.sent,console.log(a,"sssss"),i=new FormData,i.append("file",a),i.append("token",this.token),t.next=11,l()({method:"post",url:this.action,data:i});case 11:r=t.sent,n.imgUrl="".concat(this.origin,"/").concat(r.data.key);case 13:return o=new FormData,o.append("file",e),o.append("token",this.token),t.abrupt("return",l()({method:"post",url:this.action,data:o}).then((function(t){var e=Object.assign({},n,{url:"".concat(c.origin,"/").concat(t.data.key)});return e})));case 17:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getVideoPhoto:function(t){var e=window.URL.createObjectURL(t),n=document.createElement("video");n.width=500,n.height=500,n.src=e,n.currentTime=1;var a=document.createElement("canvas");return a.width=500,a.height=500,new Promise((function(t,e){n.oncanplay=function(){a.getContext("2d").drawImage(n,0,0,a.width,a.height);var i=a.toDataURL("image/jpeg"),r=rt(i,"image/jpeg");try{t(r)}catch(o){e(o)}}}))},handleUploadChange:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Array.from(e.target.files),!(n.length>9)){t.next=4;break}return console.log("选择文件最大数量不能超过9个"),t.abrupt("return");case 4:return this.loading=!0,this.$emit("loadingChange",!0),a=n.map((function(t){return r.singleUpload(t)})),t.next=9,l.a.all(a);case 9:i=t.sent,this.loading=!1,this.$emit("loadingChange",!1),this.$emit("onchange",i);case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleUpload:function(){this.$refs.fileInput.click()}},created:function(){}},lt=st,ut=(n("6e6d"),Object(x["a"])(lt,at,it,!1,null,"7f7c3cda",null)),dt=ut.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{"border-bottom":"1px solid #c8c9cc"}},[n("van-field",{attrs:{label:"标题：",placeholder:"文字内容"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),n("div",{staticClass:"upload-content"},[n("div",[n("div",[n("div",{staticClass:"upload-style"},[n("QiniuUpload",{on:{onchange:t.uploadChange,loadingChange:t.loadingChange}},[n("span",[n("Icon",{staticClass:"el-icon-camera"})],1)])],1)]),n("p",[t._v("上传图片")])])]),n("div",{staticClass:"content-show"},t._l(t.fileList,(function(e){return n("div",{staticClass:"pic-item"},[e.type.indexOf("image")>-1?n("img",{attrs:{src:t.cuttingImg(e.url),alt:""}}):e.type.indexOf("video")>-1?n("img",{attrs:{src:t.cuttingImg(e.imgUrl)}}):n("span",[t._v(t._s(e.name))])])})),0),n("div",[n("van-overlay",{attrs:{show:t.show}},[n("div",{staticClass:"overlay-loading"},[n("van-loading",{attrs:{type:"spinner",color:"#ffffff"}})],1)])],1)])},ft=[],ht=(n("f1dc"),n("6e47")),mt=(n("ac1e"),n("543e")),vt=(n("be7f"),n("565f")),gt={name:"picontent",data:function(){return{value:"",fileList:[],show:!1}},components:(ot={},Object(c["a"])(ot,vt["a"].name,vt["a"]),Object(c["a"])(ot,"Icon",E["a"]),Object(c["a"])(ot,"QiniuUpload",dt),Object(c["a"])(ot,mt["a"].name,mt["a"]),Object(c["a"])(ot,ht["a"].name,ht["a"]),ot),methods:{uploadChange:function(t){console.log(t,"pic"),this.fileList=this.fileList.concat([],t)},loadingChange:function(t){this.show=!!t},cuttingImg:function(t){return"".concat(t,"?imageView2/2/w/300/h/300/q/75|imageslim")}},created:function(){}},bt=gt,yt=(n("df92"),Object(x["a"])(bt,pt,ft,!1,null,"1add2144",null)),wt=yt.exports,xt={name:"write-panel",data:function(){return{tabType:1}},components:{Panel:nt,Icon:T.a,QiniuUpload:dt,Picontent:wt},created:function(){},methods:{handleTab:function(t){this.tabType=t},uploadChange:function(t){var e=this;t.forEach((function(t){if(t.type.indexOf("image")>-1){var n=t.url,a=new Image;a.src=n,a.style.display="inline-block",a.style.maxWidth="100%",a.style.padding="4px 0",a.style.borderRadius="5px",e.$refs.panel.$refs.notePanel.appendChild(a),a=null}}))},handleSubmit:function(){var t,e,n=this,a=this.tabType;if(1===this.tabType)t=this.$refs.picGroup.value,e=this.$refs.picGroup.fileList;else{if(e=this.$refs.panel.$refs.notePanel.innerHTML,!e)return;var i=e.indexOf("<br>")>-1?e.match("<br>"):e;t="string"===typeof i?"":e.slice(0,i.index)}g.save({title:t,content:e,type:a}).then((function(){n.$router.push("/")}))}}},kt=xt,_t=(n("d2b7"),Object(x["a"])(kt,Y,Z,!1,null,"4a2e3518",null)),Ct=_t.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-wraper"},[n("div",{staticClass:"login-title"},[t._v("\n\t\txiuxiu 登录\n\t")]),n("div",{staticClass:"login-info"},[n("van-cell-group",[n("van-field",{attrs:{required:"",clearable:"",label:"用户名",placeholder:"请输入用户名"},on:{"click-right-icon":function(e){return t.$toast("question")}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",clearable:"",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("div",{staticClass:"login-but"},[n("van-button",{staticStyle:{width:"80%"},attrs:{type:"primary",round:""},on:{click:t.submit}},[t._v("登录")])],1)])},jt=[],It=(n("66b9"),n("b650")),Tt=(n("2b28"),n("9ed2")),Pt={name:"login",data:function(){return{username:"",password:""}},methods:{submit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.username&&this.password&&g.login({username:this.username,pass:this.password}).then((function(t){0===t.data.code&&e.$router.push("/")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},components:(ct={},Object(c["a"])(ct,vt["a"].name,vt["a"]),Object(c["a"])(ct,Tt["a"].name,Tt["a"]),Object(c["a"])(ct,It["a"].name,It["a"]),ct)},Ut=Pt,$t=(n("ac5e"),Object(x["a"])(Ut,Ot,jt,!1,null,"41d2f0ac",null)),Lt=$t.exports;a["default"].use(C["default"]);var St=new C["default"]({routes:[{path:"/write",name:"panel",component:Ct},{path:"/",name:"home",component:V},{path:"/login",name:"login",component:Lt}]}),Rt=St;a["default"].config.productionTip=!1,new a["default"]({router:Rt,render:function(t){return t(_)}}).$mount("#app")},ac5e:function(t,e,n){"use strict";var a=n("5c28"),i=n.n(a);i.a},d2b7:function(t,e,n){"use strict";var a=n("dfa8"),i=n.n(a);i.a},d6f0:function(t,e){t.exports=vendor_1f4e2630c50569e7999f},dc80:function(t,e,n){},df92:function(t,e,n){"use strict";var a=n("0131"),i=n.n(a);i.a},dfa8:function(t,e,n){},f28c:function(t,e,n){t.exports=n("d6f0")(5)}});
//# sourceMappingURL=index.38afd0f4.js.map